webpackJsonp([1],{JcY5:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),r=s("d7EF"),a=s.n(r),n=s("c/Tr"),o=s.n(n),l=s("bOdI"),c=s.n(l),v={data:function(){var t;return t={size:4,score:0,list:[],intiNum:[2,4],pr:.9},c()(t,"score",0),c()(t,"bestScore",localStorage.getItem("bestScore")),c()(t,"over",!1),c()(t,"direction",[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}]),t},mounted:function(){this.init()},methods:{init:function(){this.newGame(),document.addEventListener("keyup",this.keyDown)},newGame:function(){var t=this;this.score=0,this.over=!1,this.list=o()(Array(this.size)).map(function(){return Array(t.size).fill(void 0)}),this.setRandom()},setRandom:function(){if(this.hasAvailableCells()){var t=this.randomAvailableCells(),e=a()(t,2),s=e[0],i=e[1];this.list[s][i]=this.randomValue()}},randomValue:function(){return Math.random()<this.pr?this.intiNum[0]:this.intiNum[1]},randomAvailableCells:function(){var t=this.availableCells();if(t.length)return t[Math.floor(Math.random()*t.length)]},availableCells:function(){for(var t=[],e=0;e<this.size;e++)for(var s=0;s<this.size;s++)this.list[e][s]||t.push([e,s]);return t},hasAvailableCells:function(){return!!this.availableCells().length},hasMergedCells:function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++){var s=this.list[t][e];if(s)for(var i=0;i<4;i++){var r=this.direction[i];if(this.withinBounds(t+r.x,e+r.y)){var a=this.list[t+r.x][e+r.y];if(a&&a===s)return!0}}}return!1},withinBounds:function(t,e){return t>0&&e>0&&t<this.size&&e<this.size},isAvailable:function(){return this.hasAvailableCells()||this.hasMergedCells()},randomNum:function(t){return Math.floor(Math.random()*t)},keyDown:function(t){switch(t.keyCode){case 38:this.move(1);break;case 40:this.move(3);break;case 37:this.move(0);break;case 39:this.move(2)}this.setRandom()},move:function(t){var e=this,s=this.rotate(o()(this.list),t).map(function(t,s){return e.moveLeft(t)});this.list=this.rotate(s,this.size-t),this.setLocalstorage(),this.isAvailable()||(this.over=!0)},moveLeft:function(t){for(var e=this,s=[],i=0;i<this.size;i++)t[i]&&s.push({x:i,merged:!1,value:t[i]});return s.forEach(function(i){var r=e.farthestPosition(t,i),a=t[r-1];a&&a===i.value&&!s[r-1].merged?(t[r-1]=2*a,t[i.x]=void 0,i={x:r-1,merged:!0,value:2*a},e.score+=2*a):r!=i.x&&(t[r]=i.value,t[i.x]=void 0,i.x=r)}),t},rotate:function(t,e){var s=this;if(0===(e%=4))return t;for(var i=o()(Array(this.size)).map(function(){return Array(s.size).fill(void 0)}),r=0;r<this.size;r++)for(var a=0;a<this.size;a++)i[this.size-1-r][a]=t[a][r];return e>1&&(i=this.rotate(i,e-1)),i},farthestPosition:function(t,e){for(var s=e.x;s>0&&!t[s-1];)s-=1;return s},setLocalstorage:function(){var t=localStorage.getItem("bestScore");t?this.score>t&&(localStorage.setItem("bestScore",this.score),this.bestScore=this.score):(localStorage.setItem("bestScore",this.score),this.bestScore=this.score)}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"header"},[s("h1",{staticClass:"title"},[t._v("2048")]),t._v(" "),s("div",{staticClass:"score"},[s("div",[s("span",[t._v("SCORE")]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.score))])]),t._v(" "),s("div",[s("span",[t._v("BEST")]),t._v(" "),s("span",{staticClass:"num"},[t._v(t._s(t.bestScore))])])])]),t._v(" "),s("div",{staticClass:"btn btn-mg",on:{click:t.newGame}},[t._v("新游戏")]),t._v(" "),s("div",[t.over?s("div",{staticClass:"over"},[s("p",[t._v("Game over!")]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.newGame}},[t._v("Try again")])]):t._e(),t._v(" "),s("div",{staticClass:"box"},t._l(t.list,function(e){return s("div",{staticClass:"row"},t._l(e,function(e){return s("div",{staticClass:"col",class:"n-"+e},[t._v(t._s(e))])}))}))])])},staticRenderFns:[]};var u={name:"App",components:{Block:s("VU/8")(v,h,!1,function(t){s("oVmZ")},"data-v-00810712",null).exports}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Block")],1)},staticRenderFns:[]};var d=s("VU/8")(u,f,!1,function(t){s("JcY5")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:d},template:"<App/>"})},oVmZ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.218c7765c758904f6660.js.map